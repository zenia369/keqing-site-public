/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={588:function(e){var t;t=function(e){var t=function(e){return new t.lib.init(e)};function o(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function n(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},t.lib=t.prototype={toastify:"1.11.2",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var n=document.createElement("img");n.src=this.options.avatar,n.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(n):e.insertAdjacentElement("afterbegin",n)}if(!0===this.options.close){var s=document.createElement("span");s.innerHTML="&#10006;",s.className="toast-close",s.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var i=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&i>360?e.insertAdjacentElement("afterbegin",s):e.appendChild(s)}if(this.options.stopOnFocus&&this.options.duration>0){var a=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){a.removeElement(e)}),a.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var r=o("x",this.options),c=o("y",this.options),l="left"==this.options.position?r:"-"+r,d="toastify-top"==this.options.gravity?c:"-"+c;e.style.transform="translate("+l+","+d+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var o=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,o),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},o={top:15,bottom:15},s={top:15,bottom:15},i=document.getElementsByClassName("toastify"),a=0;a<i.length;a++){e=!0===n(i[a],"toastify-top")?"toastify-top":"toastify-bottom";var r=i[a].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(i[a].style[e]=s[e]+"px",s[e]+=r+15):!0===n(i[a],"toastify-left")?(i[a].style[e]=t[e]+"px",t[e]+=r+15):(i[a].style[e]=o[e]+"px",o[e]+=r+15)}return this},t.lib.init.prototype=t.lib,t},e.exports?e.exports=t():this.Toastify=t()}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=async(e,t,o="PUT")=>{try{const n=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),s=await fetch(e,{method:o,headers:{Accept:"application/json","Content-Type":"application/json","CSRF-Token":Cookies.get("XSRF-TOKEN")},body:JSON.stringify({...t,uid:n.uid})});if(!s.ok)throw Error((await s.json()).message);return await s.json()}catch(e){throw Error(e.message)}};var t=o(588),n=o.n(t);const s={succes:"linear-gradient(to right, #00b09b, #96c93d)",error:"linear-gradient(to right, #ff5f6d, #ffc371)"},i=(e,t,o="top",i="left",a="")=>{n()({text:e,duration:5e3,close:!0,gravity:o,position:i,stopOnFocus:!0,style:{background:s[t]},className:a}).showToast()},a=document.getElementById("settings-card"),r=document.getElementById("form-card"),c=document.querySelector("span#name"),l=document.querySelector("span#city"),d=document.querySelector("span#elemental"),u=new class{HandlerCardLayout(e=!0){a.style.visibility=e?"visible":"hidden",a.classList.toggle("animate__animated"),a.classList.toggle("animate__zoomIn")}async submitFormPersonalCard(t,o){t.preventDefault();const n=r.querySelector("#newName"),s=r.querySelector("#city"),a=r.querySelector("#elemental");""!==n.value&&""!==s.value&&""!==a.value&&(c.innerHTML=n.value,l.innerHTML=s.value,d.innerHTML=a.value,await async function(t,o,n){try{const s=await e("/api/profile/changeInfo",{name:t,city:o,element:n});i(s.message,"succes")}catch(e){i(e.message,"error")}}(n.value,s.value,a.value),n.value="",s.value="",a.value=""),o(!1)}},m=document.getElementById("carts"),p=new class{removeModalCarts(){m.children[1].classList.add("animate__animated"),m.children[1].classList.add("animate__zoomOutDown"),m.children[1].addEventListener("animationend",(()=>{m.style.display="none",m.children[0].removeEventListener,m.children[1].classList.remove("animate__animated"),m.children[1].classList.remove("animate__zoomOutDown"),document.body.style="overflow: overlay; height: auto;"}))}activeModalCarts(){window.scrollTo(0,0),setTimeout((()=>{document.body.style="overflow: hidden; height: 100vh;",m.children[0].addEventListener("click",(()=>{m.children[1].classList.add("animate__animated"),m.children[1].classList.add("animate__zoomOutDown"),m.children[1].addEventListener("animationend",(()=>{m.style.display="none",m.children[0].removeEventListener,m.children[1].classList.remove("animate__animated"),m.children[1].classList.remove("animate__zoomOutDown"),document.body.style="overflow: overlay; height: auto;"}))})),m.style.display="block"}),600)}},h=document.getElementById("carts").querySelector("ul"),f=document.querySelector(".cart-characters-wrapp__cards"),{activeModalCarts:y,removeModalCarts:v}=p,g=new class{activeSetNewAvatar(){h.children[1].classList.add("d-none"),h.children[0].classList.remove("d-none"),f.children[1].classList.add("d-none"),f.children[0].classList.remove("d-none"),y(),document.querySelector("#choose-new-card").addEventListener("click",w)}};function w(t){"LI"===t.target.parentElement.nodeName&&(queueMicrotask((()=>{v()})),queueMicrotask((()=>{window.scrollTo(0,0)})),async function(t){const o=document.querySelector(".main__first__section__card__wrapper__image-wrapper__border-content"),n=document.querySelector(".main__first__section__card"),s=t.target.parentElement,a=s.dataset.src,r=s.dataset.card;Promise.resolve().then((()=>{const e=document.createElement("img");return e.src=r,new Promise((t=>e.onload=e.onerror=t))})).then((()=>{n.style=`background-image: url(${r});`,o.style=`background-image: url(${a});`})).catch((()=>{i("Erro loading new avatar","error")})),await async function(t,o){try{const n=await e("/api/profile/changeAvatar",{avatar:t,card:o});i(n.message,"succes")}catch(e){i(e.message,"error")}}(a,r)}(t))}const E=document.getElementById("carts").querySelector("ul"),b=document.querySelector(".cart-characters-wrapp__cards"),{activeModalCarts:L,removeModalCarts:k}=p,_=new class{activeSetNewCharacter(t,o){const n=t.target.parentElement,s=+n.dataset.id;if("LI"===n.nodeName){const a=document.querySelector("#choose-new-character"),r=Array.from(document.getElementById("characters").children);async function c(t){if("LI"!==t.target.parentElement.nodeName||r.find((e=>e.dataset.name===t.target.parentElement.dataset.name)))setTimeout((()=>k()),0),setTimeout((()=>window.scrollTo(0,0)),1e3),a.removeEventListener("click",c);else{setTimeout((()=>k()),0),setTimeout((()=>window.scrollTo(0,0)),1e3);const r=o(t,n);await async function(t,o){try{const n=await e("/api/profile/updateStand",{newCard:o,id:t});i(n.message,"succes")}catch(e){i(e.message,"error")}}(s,r),a.removeEventListener("click",c)}}E.children[0].classList.add("d-none"),E.children[1].classList.remove("d-none"),b.children[0].classList.add("d-none"),b.children[1].classList.remove("d-none"),L(),a.addEventListener("click",c)}}changeStandCharacter(e,t){const o=e.target.parentElement,n=o.querySelector("#name").innerHTML,s=o.querySelector("#image").style.backgroundImage,i=o.querySelector("#element").src,a=t.querySelector("#name"),r=t.querySelector("#image"),c=t.querySelector("#element");return a.innerHTML=n,r.style=`background-image: ${s};`,c.src=i,t.dataset.name=o.dataset.name,{name:n,element:i,images:{small:s.match(/\/[a-zA-z0-9\/.]{0,}/)[0]}}}},C=document.getElementById("gallery_preload").children,N=new class{activePreload(){C[0].classList.toggle("active-preload"),C[1].classList.toggle("active-preload")}},S=document.querySelector(".gallery"),T=document.querySelector(".btn-edit-gallery"),q=document.querySelector(".wrapp-edit-btns"),x=q.querySelector(".btn-edit-gallery-cancel"),M=q.querySelector(".btn-edit-gallery-submit"),O=new class{activeEditMode(){const t=document.createElement("div");function o(){const e=document.querySelector(".edit-mode-model"),t=document.querySelectorAll('ul.gallery_wrapp input[type="checkbox"]');e.remove(),S.classList.toggle("toggleGalleryVisible"),T.classList.remove("d-none"),q.classList.toggle("d-none"),T.disabled=!1;for(const e of t)e.checked=!1;x.removeEventListener("click",o),M.removeEventListener("click",n)}async function n(){const t=document.querySelectorAll('ul.gallery_wrapp input[type="checkbox"]:checked'),n=[...t].reduce(((e,t)=>{const o=t.parentNode.parentNode.children[1].getAttribute("href");return e.push(o),e}),[]);await async function(t){console.log(window.pageYOffset);try{const o=await e("/api/profile/deleteFavoritePhoto",{links:t},"DELETE");i(o.message,"succes","top","left","toastify-sticky")}catch(e){console.log(e.message),i(e.message,"error","top","left","toastify-sticky")}}(n),queueMicrotask((()=>{[...t].forEach((e=>{const t=e.parentNode.parentNode;t.style="transform: scale(0.5); opacity: 0.4;",setTimeout((()=>t.remove()),450)})),o()}))}t.classList.add("edit-mode-model"),t.style="position: fixed; top:0; right:0; bottom:0; left:0; background: rgba(1,1,1, .4); z-index-1;",document.body.appendChild(t),S.classList.toggle("toggleGalleryVisible"),q.classList.toggle("d-none"),x.addEventListener("click",o),M.addEventListener("click",n)}},I=document.getElementById("btn-card-ss"),P=document.getElementById("form-card"),B=document.querySelector("#close-modal"),F=document.getElementById("avatar-card"),A=document.getElementById("characters"),H=document.getElementById("gallery_preload").children,j=document.querySelector(".btn-edit-gallery"),{HandlerCardLayout:z,submitFormPersonalCard:W}=u,{removeModalCarts:D}=p,{activeSetNewAvatar:V}=g,{activeSetNewCharacter:R,changeStandCharacter:$}=_,{activePreload:G}=N,{activeEditMode:U}=O;I.addEventListener("click",z),P.addEventListener("submit",(e=>W(e,z))),B.addEventListener("click",D),F.addEventListener("click",V),A.addEventListener("click",(e=>R(e,$))),H[0].addEventListener("click",G),j.addEventListener("click",(e=>{e.target.classList.add("d-none"),e.target.disabled=!0,U()}))})()})();