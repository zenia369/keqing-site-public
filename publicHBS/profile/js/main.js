(()=>{"use strict";const e=document.getElementById("settings-card"),t=document.getElementById("form-card"),a=document.querySelector("span#name"),r=document.querySelector("span#city"),n=document.querySelector("span#elemental"),c=new class{HandlerCardLayout(t=!0){e.style.visibility=t?"visible":"hidden",e.classList.toggle("animate__animated"),e.classList.toggle("animate__zoomIn")}submitFormPersonalCard(e,c){e.preventDefault();const l=t.querySelector("#newName"),o=t.querySelector("#city"),d=t.querySelector("#elemental");""!==l.value&&""!==o.value&&""!==d.value&&(a.innerHTML=l.value,r.innerHTML=o.value,n.innerHTML=d.value,l.value="",o.value="",d.value=""),c(!1)}},l=document.getElementById("carts"),o=new class{removeModalCarts(){l.children[1].classList.add("animate__animated"),l.children[1].classList.add("animate__zoomOutDown"),l.children[1].addEventListener("animationend",(()=>{l.style.display="none",l.children[0].removeEventListener,l.children[1].classList.remove("animate__animated"),l.children[1].classList.remove("animate__zoomOutDown")}))}activeModalCarts(){l.style.display="block",l.children[0].addEventListener("click",(()=>this.removeModalCarts()))}},d=document.getElementById("carts").querySelector("ul"),s=document.querySelector(".cart-characters-wrapp__cards"),{activeModalCarts:i,removeModalCarts:m}=o,u=new class{activeSetNewAvatar(e){d.children[1].classList.add("d-none"),d.children[0].classList.remove("d-none"),s.children[1].classList.add("d-none"),s.children[0].classList.remove("d-none"),i();const t=document.querySelector("#choose-new-card");t.addEventListener("click",(a=>{"LI"===a.target.parentElement.nodeName&&(setTimeout((()=>m()),0),setTimeout((()=>window.scrollTo(0,0)),1e3),e(a),t.removeEventListener("click",null))}))}changeCard(e){const t=document.querySelector(".main__first__section__card__wrapper__image-wrapper__border-content"),a=document.querySelector(".main__first__section__card"),r=e.target.parentElement,n=r.dataset.src,c=r.dataset.card;Promise.resolve().then((()=>{const e=document.createElement("img");return e.src=c,new Promise((t=>e.onload=e.onerror=t))})).then((()=>{a.style=`background-image: url(${c});`,t.style=`background-image: url(${n});`})).catch((()=>{console.warn("Error with load image for card")}))}},y=document.getElementById("carts").querySelector("ul"),g=document.querySelector(".cart-characters-wrapp__cards"),{activeModalCarts:v,removeModalCarts:L}=o,h=new class{activeSetNewCharacter(e,t){const a=e.target.parentElement;if("LI"===a.nodeName){const r=document.querySelector("#choose-new-character"),n=Array.from(document.getElementById("characters").children);function c(e){"LI"!==e.target.parentElement.nodeName||n.find((t=>t.dataset.name===e.target.parentElement.dataset.name))?(setTimeout((()=>L()),0),setTimeout((()=>window.scrollTo(0,0)),1e3),r.removeEventListener("click",c)):(setTimeout((()=>L()),0),setTimeout((()=>window.scrollTo(0,0)),1e3),t(e,a),r.removeEventListener("click",c))}y.children[0].classList.add("d-none"),y.children[1].classList.remove("d-none"),g.children[0].classList.add("d-none"),g.children[1].classList.remove("d-none"),v(),r.addEventListener("click",c)}}changeStandCharacter(e,t){const a=e.target.parentElement,r=a.querySelector("#name").innerHTML,n=a.querySelector("#image").style.backgroundImage,c=a.querySelector("#element").src,l=t.querySelector("#name"),o=t.querySelector("#image"),d=t.querySelector("#element");l.innerHTML=r,o.style=`background-image: ${n};`,d.src=c,t.dataset.name=a.dataset.name}},E=document.getElementById("gallery_preload").children,p=new class{activePreload(){E[0].classList.toggle("active-preload"),E[1].classList.toggle("active-preload")}},_=document.querySelector(".gallery"),S=document.querySelector(".btn-edit-gallery"),w=document.querySelector(".wrapp-edit-btns"),q=w.querySelector(".btn-edit-gallery-cancel"),b=w.querySelector(".btn-edit-gallery-submit"),k=new class{activeEditMode(){const e=document.createElement("div");function t(){const e=document.querySelector(".edit-mode-model"),r=document.querySelectorAll('ul.gallery_wrapp input[type="checkbox"]');e.remove(),_.classList.toggle("toggleGalleryVisible"),S.classList.remove("d-none"),w.classList.toggle("d-none"),S.disabled=!1;for(const e of r)e.checked=!1;q.removeEventListener("click",t),b.removeEventListener("click",a)}function a(){const e=document.querySelectorAll('ul.gallery_wrapp input[type="checkbox"]:checked');console.log(e),t()}e.classList.add("edit-mode-model"),e.style="position: fixed; top:0; right:0; bottom:0; left:0; background: rgba(1,1,1, .4); z-index-1;",document.body.appendChild(e),_.classList.toggle("toggleGalleryVisible"),w.classList.toggle("d-none"),q.addEventListener("click",t),b.addEventListener("click",a)}},C=document.getElementById("btn-card-ss"),I=document.getElementById("form-card"),f=document.querySelector("#close-modal"),M=document.getElementById("avatar-card"),T=document.getElementById("characters"),B=document.getElementById("gallery_preload").children,N=document.querySelector(".btn-edit-gallery"),{HandlerCardLayout:H,submitFormPersonalCard:P}=c,{removeModalCarts:A}=o,{activeSetNewAvatar:x,changeCard:z}=u,{activeSetNewCharacter:D,changeStandCharacter:$}=h,{activePreload:F}=p,{activeEditMode:G}=k;C.addEventListener("click",H),I.addEventListener("submit",(e=>P(e,H))),f.addEventListener("click",A),M.addEventListener("click",(()=>x(z))),T.addEventListener("click",(e=>D(e,$))),B[0].addEventListener("click",F),N.addEventListener("click",(e=>{e.target.classList.add("d-none"),e.target.disabled=!0,G()}))})();